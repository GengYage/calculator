# 栈实现综合计算器

## 目的

+ 栈完成表达式的计算结果(String 类型)

## 思路

+ 将字符串处理，将数字和符号分离，存入List(list)集合,兼容小数点(浮点数)

  + 定义一个index，用来遍历表达式
  + 定义 char 判断字符是否为操作符 定义start 和 end，用来截取字符串
  + 不是运算符的话，end++
  + 是运算符的话 判断end==start?
    + true 截取字符串substring(start,end)存入list
    + false将当前运算符加入list
    + **为了避免两个运算符在一块的情况：3*(1+2),加一个判断,如果start==end==index?**
      
      + **true end++**
    + **切记 如果字符串最后一位不是运算符，切记要把最有一个数字加进集合**
    
  
+ 将表达式从中缀转换为后缀表达式(逆波兰表达式),规则如下

  + 遇到数字直接给后缀表达式

  + 优先级用数字表示如下

    (   +   -  *  /  √

    0  1  1  2  2  3

  + 设置符号栈

  + 当前符号栈不为空，比较优先级,如果优先级**大于**栈中操作符,直接入栈,**否则**将符号栈中栈顶运算符发给后缀表达式,然后将当前运算符放入栈中。
  + 若当前字符为"("，直接进栈
  + 若当前字符为")"，则从栈顶起，依次将栈中运算符出栈发送给后缀表达式,直到碰到"("。将栈中"("出栈，不需要发送给后缀式,然后继续扫描表达式。

+ **例子** (3+4)*5-6 => 3 4 + 5 * 6

  + ( 入操作符栈						
  + 3输出                                          3
  + +的优先级大于( 入栈
  + 4输出                                           3 4
  + ) 将栈中的操作符全取出           3 4 +
  + *入栈(说明，上一步栈已经为空，直接入栈)
  + 5弹出                                           3 4 + 5
  + -优先级小于*,弹出 * -入栈       3 4 + 5 *
  + 6弹出                                           3 4 + 5 * 6
  + 扫描完毕，依次弹出栈中符号 3 4 + 5 * 6 -
  + 得出逆波兰表达式 3 4 + 5 * 6 -
  
+ 更多例子:

  + 3+(9+(9+8))                   3 9 9 8 + + +
  + 3*(9+(9+8))+3/(4+5)    3 9 9 8 + + * 3 4 5 + / +
  + 3+(9+(9+8))+3*√(3+5)      3 9 9 8 + + 3 3 5 + √ * + +

+ 计算逆波兰表达式 3 4 + 5 * 6 - 示例:

  + 3 4 入数字栈
  + +从数字栈取出两次数字运算加法，结果7入数字栈,5入数字栈  **说明第一次取出的数是加号后面的那个，第二次是加号前面的**
  + *数字栈弹出两个 分别为 5 7 运算 * 结果35如数字栈,6入数字栈
  + -数字栈弹出两个 分别为 6 35注意第一次弹出的为-号后面的上面做过说明 35-6 结果29入栈
  + 最后逆波兰表达式计算完毕 结果为数字栈栈顶的29
  + 重点 如果运算符只运算一个数比如开方,那么一定不要把第二个数pop出来

